{"remainingRequest":"/Users/xutingting06/pat/personal-space/node_modules/babel-loader/lib/index.js!/Users/xutingting06/pat/personal-space/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xutingting06/pat/personal-space/src/components/dialogWin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xutingting06/pat/personal-space/src/components/dialogWin.vue","mtime":1590318473666},{"path":"/Users/xutingting06/pat/personal-space/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciByZXFVcmwgPSBsb2NhdGlvbi5vcmlnaW4ucmVwbGFjZShsb2NhdGlvbi5wb3J0LCAnMzAwMCcpOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIiIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbW1lbnRzOiBbXQogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICBkaWFsb2dXaW5WaXNpYmxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4KICAgIH0sCiAgICByb290SUQ6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgLy8g5riy5p+T5pe25Yqg6L296K+E6K66CiAgICB0aGlzLmxvYWRDb21tZW50cygpOwogIH0sCiAgbWV0aG9kczogewogICAgLy/lr7nor53nqpflj6PnmoTlhbPpl60KICAgIGRpYWxvZ1dpbkNsb3NlOiBmdW5jdGlvbiBkaWFsb2dXaW5DbG9zZSgpIHsKICAgICAgdGhpcy4kZW1pdCgnY2xvc2VEaWFsb2dXaW4nKTsKICAgIH0sCiAgICAvL+WKoOi9veS8muivneWGheWuuQogICAgbG9hZENvbW1lbnRzOiBmdW5jdGlvbiBsb2FkQ29tbWVudHMoKSB7CiAgICAgIHZhciAkdm0gPSB0aGlzOwogICAgICAkdm0uJGF4aW9zKHsKICAgICAgICB1cmw6IHJlcVVybCArICcvY29tbWVudHMvcmVwbGF5JywKICAgICAgICBtZXRob2Q6ICdnZXQnLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgcjogJHZtLnJvb3RJRAogICAgICAgIH0sCiAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8vIOWkhOeQhuaIkOWKn+eahOe7k+aenAogICAgICAgIGlmIChyZXMuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAkdm0uY29tbWVudHMgPSByZXMuZGF0YS5jb21tZW50czsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWxlcnQoIuWxleW8gOivhOiuuuWksei0pe+8jCIgKyByZXMuZGF0YS5lcnJvcik7CiAgICAgICAgfQogICAgICB9LCBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgLy8g5aSE55CG5aSx6LSl55qE57uT5p6cCiAgICAgICAgYWxlcnQocmVzLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICAvL+i4qQogICAgZGlzbGlrZUNvbW1lbnQ6IGZ1bmN0aW9uIGRpc2xpa2VDb21tZW50KGNvbW1lbnRJbmRleCwgaWQpIHsKICAgICAgaWYgKHRoaXMuY29tbWVudHNbY29tbWVudEluZGV4XS51bmxpa2VTZWxlY3RlZCkgewogICAgICAgIHRoaXMuY29tbWVudHNbY29tbWVudEluZGV4XS51bmxpa2VTZWxlY3RlZCA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLmNvbW1lbnRzW2NvbW1lbnRJbmRleF0ubGlrZVNlbGVjdGVkKSB7CiAgICAgICAgICB0aGlzLmxpa2VDb21tZW50KGNvbW1lbnRJbmRleCwgaWQsICdyb3V0ZScpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jb21tZW50c1tjb21tZW50SW5kZXhdLnVubGlrZVNlbGVjdGVkID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIC8v6LWeCiAgICBsaWtlQ29tbWVudDogZnVuY3Rpb24gbGlrZUNvbW1lbnQoY29tbWVudEluZGV4LCBpZCwgcm91dGUpIHsKICAgICAgdmFyICR2bSA9IHRoaXM7CiAgICAgIHZhciBzZWxlY3RlZCA9ICR2bS5jb21tZW50c1tjb21tZW50SW5kZXhdLmxpa2VTZWxlY3RlZDsKCiAgICAgIHZhciBfbGlrZTsKCiAgICAgIGlmIChzZWxlY3RlZCkgewogICAgICAgIF9saWtlID0gJHZtLmNvbW1lbnRzW2NvbW1lbnRJbmRleF0ubGlrZSAtIDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX2xpa2UgPSAkdm0uY29tbWVudHNbY29tbWVudEluZGV4XS5saWtlICsgMTsKICAgICAgfQoKICAgICAgdmFyIGl0ZW0gPSB7CiAgICAgICAgX2lkOiBpZCwKICAgICAgICBsaWtlOiBfbGlrZQogICAgICB9OwogICAgICAkdm0uJGF4aW9zKHsKICAgICAgICB1cmw6IHJlcVVybCArICcvY29tbWVudHMvdXBkYXRlTGlrZScsCiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgcGFyYW1zOiBpdGVtLAogICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyDlpITnkIbmiJDlip/nmoTnu5PmnpwKICAgICAgICBpZiAocmVzLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgJHZtLmNvbW1lbnRzW2NvbW1lbnRJbmRleF0ubGlrZSA9IF9saWtlOwogICAgICAgICAgJHZtLmNvbW1lbnRzW2NvbW1lbnRJbmRleF0ubGlrZVNlbGVjdGVkID0gIXNlbGVjdGVkOwoKICAgICAgICAgIGlmIChyb3V0ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICR2bS5jb21tZW50c1tjb21tZW50SW5kZXhdLnVubGlrZVNlbGVjdGVkID0gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydChyZXMuZGF0YS5lcnJvcik7CiAgICAgICAgfQogICAgICB9LCBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgLy8g5aSE55CG5aSx6LSl55qE57uT5p6cCiAgICAgICAgYWxlcnQocmVzLmRhdGEpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["dialogWin.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <el-dialog id='dialogWin' title=\"查看对话\" top=\"10%\" :before-close=\"dialogWinClose\" :visible.sync=\"dialogWinVisible\">\n        <div class=\"commentItems\">\n            <div v-for=\"(comment,commentIndex) in comments\">\n                <div class=\"AuthorInfo\">\n                    <img :src=\"comment.userImage\" style=\"width24px;height:24px;\">\n                    <span class=\"name\">{{comment.userName}}\n                    <span v-show='comment.rootID'>回复</span>\n                        {{comment.PName}}\n                    </span>\n                    <span class=\"CommentTime\">\n                        {{comment.createAt}}\n                    </span>\n                </div>\n                <p>{{comment.content}}</p>\n                <div class=\"buttons\">\n                    <el-button type=\"info2\" icon=\"star-on\" @click=\"likeComment(commentIndex,comment._id)\" :class=\"{selected:comment.likeSelected}\">\n                        {{comment.like? \"赞\"+comment.like : \"赞\"}}\n                    </el-button>\n                    <el-button type=\"info2\" class=\"hoverBtn\" icon=\"star-off\" @click=\"dislikeComment(commentIndex,comment._id)\" :class=\"[{selected:comment.unlikeSelected}]\">\n                        {{comment.unlikeSelected ? \"取消踩\" : \"踩\"}}\n                    </el-button>\n                </div>\n            </div>\n        </div>\n    </el-dialog>\n</template>\n<script>\n    let reqUrl = location.origin.replace(location.port, '3000');\n    export default {\n        name: \"\",\n        data() {\n            return{\n                comments:[]\n            }\n        },\n        props:{\n            dialogWinVisible: {\n                type: Boolean\n            },\n            rootID: {\n                type:String\n            }\n        },\n        mounted() {\n            // 渲染时加载评论\n            this.loadComments()\n        },\n        methods: {\n            //对话窗口的关闭\n            dialogWinClose:function(){\n                this.$emit('closeDialogWin')\n            },\n            //加载会话内容\n            loadComments:function(){\n                let $vm = this;\n                $vm.$axios({\n                    url: reqUrl + '/comments/replay',\n                    method: 'get',\n                    params: {\n                        r: $vm.rootID\n                    },\n                    withCredentials: true\n                }).then(function (res) {\n                    // 处理成功的结果\n                    if (res.data.success) {\n                        $vm.comments=res.data.comments;\n                        return;\n                    }\n                    else{\n                        alert(\"展开评论失败，\"+res.data.error);\n                    }\n                },function (res) {\n                    // 处理失败的结果\n                    alert(res.data);\n                });\n            },\n            //踩\n            dislikeComment:function(commentIndex,id){\n                if(this.comments[commentIndex].unlikeSelected){\n                    this.comments[commentIndex].unlikeSelected=false;\n                }\n                else {\n                    if (this.comments[commentIndex].likeSelected) {\n                        this.likeComment(commentIndex,id,'route');\n                    }\n                    this.comments[commentIndex].unlikeSelected=true;\n                }\n            },\n            //赞\n            likeComment:function(commentIndex,id,route){\n                let $vm = this;\n                let selected=$vm.comments[commentIndex].likeSelected;\n                var _like;\n                if (selected) {\n                    _like=$vm.comments[commentIndex].like-1;\n                }\n                else{\n                    _like=$vm.comments[commentIndex].like+1;\n                }\n                var item={\n                    _id:id,\n                    like:_like\n                }\n                $vm.$axios({\n                    url: reqUrl + '/comments/updateLike',\n                    method: 'post',\n                    params: item,\n                    withCredentials: true\n                }).then(function (res) {\n                    // 处理成功的结果\n                    if (res.data.success) {\n                        $vm.comments[commentIndex].like=_like;\n                        $vm.comments[commentIndex].likeSelected=!selected;\n                        if (route===undefined) {\n                            $vm.comments[commentIndex].unlikeSelected=false;\n                        }\n                        return;\n                    }\n                    else{\n                        alert(res.data.error);\n                    }\n                }, function (res) {\n                    // 处理失败的结果\n                    alert(res.data);\n                })\n            }\n        }\n    }\n</script>\n<style lang='less'>\n#dialogWin{\n    text-align: left;\n    .el-dialog__body{\n        height: 500px;\n        overflow-y: scroll;\n    }\n    .commentItems>div{\n        border-top: 1px solid #eee;\n        padding:10px;\n        .AuthorInfo{\n            margin: 10px 0px;\n            img{\n                cursor: pointer;\n            }\n            .name{\n                font-weight: 600;\n                line-height: 2;\n                vertical-align: text-bottom;\n                cursor: pointer;\n                margin-left: 5px;\n            }\n            .sign{\n                line-height: 2;\n                vertical-align: text-bottom;\n                font-size: 14px;\n            }\n        }\n        .hoverBtn{\n            display: none;\n        }\n        div:hover {\n            .hoverBtn {\n                display: inline-block;\n            }\n        }\n        .CommentTime {\n            vertical-align: super;\n            float: right;\n            color: #8590a6;\n        }\n        .el-button--info2{\n            color: #8590a6;\n            background-color: transparent;\n            border: none;\n            border-radius: 0;\n            padding: 8px 10px;\n        }\n        .buttons{\n            .selected{\n                color:#2d84cc;\n            }\n        }\n    }\n}\n</style>"],"sourceRoot":"src/components"}]}