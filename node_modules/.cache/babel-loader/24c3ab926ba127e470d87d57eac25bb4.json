{"remainingRequest":"/Users/xutingting06/pat/personal-space/node_modules/babel-loader/lib/index.js!/Users/xutingting06/pat/personal-space/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xutingting06/pat/personal-space/src/components/dialogWin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xutingting06/pat/personal-space/src/components/dialogWin.vue","mtime":1590313380474},{"path":"/Users/xutingting06/pat/personal-space/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICIiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb21tZW50czogW10KICAgIH07CiAgfSwKICBwcm9wczogewogICAgZGlhbG9nV2luVmlzaWJsZTogewogICAgICB0eXBlOiBCb29sZWFuCiAgICB9LAogICAgUm9vdElEOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfQogIH0sCiAgLy8gbW91bnRlZCgpey8v5riy5p+T5pe25Yqg6L296K+E6K66CiAgLy8gICB0aGlzLmxvYWRDb21tZW50cygpCiAgLy8gfSwKICBtZXRob2RzOiB7CiAgICAvL+Wvueivneeql+WPo+eahOWFs+mXrQogICAgZGlhbG9nV2luQ2xvc2U6IGZ1bmN0aW9uIGRpYWxvZ1dpbkNsb3NlKCkgewogICAgICB0aGlzLiRlbWl0KCdjbG9zZURpYWxvZ1dpbicpOwogICAgfSwKICAgIC8v5Yqg6L295Lya6K+d5YaF5a65CiAgICBsb2FkQ29tbWVudHM6IGZ1bmN0aW9uIGxvYWRDb21tZW50cygpIHsKICAgICAgdGhpcy4kaHR0cC5nZXQoJy9zZXJ2ZXIvY29tbWVudHMvcmVwbGF5P3I9JyArIHRoaXMuUm9vdElEKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyDlpITnkIbmiJDlip/nmoTnu5PmnpwKICAgICAgICBpZiAocmVzLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgdGhpcy5jb21tZW50cyA9IHJlcy5kYXRhLmNvbW1lbnRzOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydCgi5bGV5byA6K+E6K665aSx6LSl77yMIiArIHJlcy5kYXRhLmVycm9yKTsKICAgICAgICB9CiAgICAgIH0sIGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyDlpITnkIblpLHotKXnmoTnu5PmnpwKICAgICAgICBhbGVydChyZXMuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8v6LipCiAgICBkaXNsaWtlQ29tbWVudDogZnVuY3Rpb24gZGlzbGlrZUNvbW1lbnQoY29tbWVudEluZGV4LCBpZCkgewogICAgICBpZiAodGhpcy5jb21tZW50c1tjb21tZW50SW5kZXhdLnVubGlrZVNlbGVjdGVkKSB7CiAgICAgICAgdGhpcy5jb21tZW50c1tjb21tZW50SW5kZXhdLnVubGlrZVNlbGVjdGVkID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMuY29tbWVudHNbY29tbWVudEluZGV4XS5saWtlU2VsZWN0ZWQpIHsKICAgICAgICAgIHRoaXMubGlrZUNvbW1lbnQoY29tbWVudEluZGV4LCBpZCwgJ3JvdXRlJyk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmNvbW1lbnRzW2NvbW1lbnRJbmRleF0udW5saWtlU2VsZWN0ZWQgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgLy/otZ4KICAgIGxpa2VDb21tZW50OiBmdW5jdGlvbiBsaWtlQ29tbWVudChjb21tZW50SW5kZXgsIGlkLCByb3V0ZSkgewogICAgICB2YXIgc2VsZWN0ZWQgPSB0aGlzLmNvbW1lbnRzW2NvbW1lbnRJbmRleF0ubGlrZVNlbGVjdGVkOwoKICAgICAgdmFyIF9saWtlOwoKICAgICAgaWYgKHNlbGVjdGVkKSB7CiAgICAgICAgX2xpa2UgPSB0aGlzLmNvbW1lbnRzW2NvbW1lbnRJbmRleF0ubGlrZSAtIDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX2xpa2UgPSB0aGlzLmNvbW1lbnRzW2NvbW1lbnRJbmRleF0ubGlrZSArIDE7CiAgICAgIH0KCiAgICAgIHZhciBpdGVtID0gewogICAgICAgIF9pZDogaWQsCiAgICAgICAgbGlrZTogX2xpa2UKICAgICAgfTsKICAgICAgdGhpcy4kaHR0cC5wb3N0KCdzZXJ2ZXIvY29tbWVudHMvdXBkYXRlTGlrZScsIGl0ZW0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8vIOWkhOeQhuaIkOWKn+eahOe7k+aenAogICAgICAgIGlmIChyZXMuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLmNvbW1lbnRzW2NvbW1lbnRJbmRleF0ubGlrZSA9IF9saWtlOwogICAgICAgICAgdGhpcy5jb21tZW50c1tjb21tZW50SW5kZXhdLmxpa2VTZWxlY3RlZCA9ICFzZWxlY3RlZDsKCiAgICAgICAgICBpZiAocm91dGUgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICB0aGlzLmNvbW1lbnRzW2NvbW1lbnRJbmRleF0udW5saWtlU2VsZWN0ZWQgPSBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KHJlcy5kYXRhLmVycm9yKTsKICAgICAgICB9CiAgICAgIH0sIGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyDlpITnkIblpLHotKXnmoTnu5PmnpwKICAgICAgICBhbGVydChyZXMuZGF0YSk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["dialogWin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAsBA,eAAA;AACA,EAAA,IAAA,EAAA,EADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA;AADA,KAAA;AAGA,GANA;AAOA,EAAA,KAAA,EAAA;AACA,IAAA,gBAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA,KADA;AAIA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AAJA,GAPA;AAeA;AACA;AACA;AACA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,cAAA,EAAA,0BAAA;AACA,WAAA,KAAA,CAAA,gBAAA;AACA,KAJA;AAKA;AACA,IAAA,YAAA,EAAA,wBAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,+BAAA,KAAA,MAAA,EAAA,IAAA,CACA,UAAA,GAAA,EAAA;AACA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AACA,eAAA,QAAA,GAAA,GAAA,CAAA,IAAA,CAAA,QAAA;AACA;AACA,SAHA,MAIA;AACA,UAAA,KAAA,CAAA,YAAA,GAAA,CAAA,IAAA,CAAA,KAAA,CAAA;AACA;AACA,OAVA,EAUA,UAAA,GAAA,EAAA;AACA;AACA,QAAA,KAAA,CAAA,GAAA,CAAA,IAAA,CAAA;AACA,OAbA;AAcA,KArBA;AAsBA;AACA,IAAA,cAAA,EAAA,wBAAA,YAAA,EAAA,EAAA,EAAA;AACA,UAAA,KAAA,QAAA,CAAA,YAAA,EAAA,cAAA,EAAA;AACA,aAAA,QAAA,CAAA,YAAA,EAAA,cAAA,GAAA,KAAA;AACA,OAFA,MAEA;AACA,YAAA,KAAA,QAAA,CAAA,YAAA,EAAA,YAAA,EAAA;AACA,eAAA,WAAA,CAAA,YAAA,EAAA,EAAA,EAAA,OAAA;AACA;;AACA,aAAA,QAAA,CAAA,YAAA,EAAA,cAAA,GAAA,IAAA;AACA;AACA,KAhCA;AAiCA;AACA,IAAA,WAAA,EAAA,qBAAA,YAAA,EAAA,EAAA,EAAA,KAAA,EAAA;AACA,UAAA,QAAA,GAAA,KAAA,QAAA,CAAA,YAAA,EAAA,YAAA;;AACA,UAAA,KAAA;;AACA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,GAAA,KAAA,QAAA,CAAA,YAAA,EAAA,IAAA,GAAA,CAAA;AACA,OAFA,MAEA;AACA,QAAA,KAAA,GAAA,KAAA,QAAA,CAAA,YAAA,EAAA,IAAA,GAAA,CAAA;AACA;;AACA,UAAA,IAAA,GAAA;AACA,QAAA,GAAA,EAAA,EADA;AAEA,QAAA,IAAA,EAAA;AAFA,OAAA;AAIA,WAAA,KAAA,CAAA,IAAA,CAAA,4BAAA,EAAA,IAAA,EAAA,IAAA,CACA,UAAA,GAAA,EAAA;AACA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AACA,eAAA,QAAA,CAAA,YAAA,EAAA,IAAA,GAAA,KAAA;AACA,eAAA,QAAA,CAAA,YAAA,EAAA,YAAA,GAAA,CAAA,QAAA;;AACA,cAAA,KAAA,KAAA,SAAA,EAAA;AACA,iBAAA,QAAA,CAAA,YAAA,EAAA,cAAA,GAAA,KAAA;AACA;;AACA;AACA,SAPA,MAQA;AACA,UAAA,KAAA,CAAA,GAAA,CAAA,IAAA,CAAA,KAAA,CAAA;AACA;AACA,OAdA,EAcA,UAAA,GAAA,EAAA;AACA;AACA,QAAA,KAAA,CAAA,GAAA,CAAA,IAAA,CAAA;AACA,OAjBA;AAkBA;AAhEA;AAlBA,CAAA","sourcesContent":["<template>\n  <el-dialog id='dialogWin' title=\"查看对话\" top=\"10%\" :before-close=\"dialogWinClose\" :visible.sync=\"dialogWinVisible\" @open='loadComments'>\n    <div class=\"commentItems\">\n      <div v-for=\"(comment,commentIndex) in comments\">\n        <div class=\"AuthorInfo\">\n          <img :src=\"comment.userImage\" style=\"width24px;height:24px;\">\n          <span class=\"name\">{{comment.userName}}\n            <span v-show='comment.RootID'>回复</span>\n            {{comment.PName}}\n          </span>\n          <span class=\"CommentTime\">{{comment.createAt}}</span>\n        </div>\n        <p>{{comment.content}}</p>\n        <div class=\"buttons\">\n          <el-button type=\"info2\" icon=\"star-on\" @click=\"likeComment(commentIndex,comment._id)\" :class=\"{selected:comment.likeSelected}\">{{comment.like? \"赞\"+comment.like : \"赞\"}}</el-button>\n           <el-button type=\"info2\" class=\"hoverBtn\" icon=\"star-off\" @click=\"dislikeComment(commentIndex,comment._id)\" :class=\"[{selected:comment.unlikeSelected}]\">{{comment.unlikeSelected?\"取消踩\":\"踩\"}}</el-button>\n        </div>\n      </div>\n    </div>\n  </el-dialog>\n</template>\n<script>\n  export default{\n    name:\"\",\n    data(){\n      return{\n        comments:[]\n      }\n    },\n    props:{\n      dialogWinVisible: {\n        type: Boolean\n      },\n      RootID:{\n        type:String\n      }\n    },\n    // mounted(){//渲染时加载评论\n    //   this.loadComments()\n    // },\n    methods: {\n      //对话窗口的关闭\n      dialogWinClose:function(){\n        this.$emit('closeDialogWin')\n      },\n      //加载会话内容\n      loadComments:function(){\n        this.$http.get('/server/comments/replay?r='+this.RootID).then(\n          function (res) {\n              // 处理成功的结果\n              if (res.data.success) {\n                this.comments=res.data.comments;\n                return;\n              }\n              else{\n                alert(\"展开评论失败，\"+res.data.error);\n              }\n            },function (res) {\n            // 处理失败的结果\n            alert(res.data);\n          });\n      },\n      //踩\n      dislikeComment:function(commentIndex,id){\n        if(this.comments[commentIndex].unlikeSelected){\n          this.comments[commentIndex].unlikeSelected=false;\n        }else{\n          if (this.comments[commentIndex].likeSelected) {\n            this.likeComment(commentIndex,id,'route');\n          }\n          this.comments[commentIndex].unlikeSelected=true;\n        }\n      },\n      //赞\n      likeComment:function(commentIndex,id,route){\n        let selected=this.comments[commentIndex].likeSelected;\n        var _like;\n        if (selected) {\n          _like=this.comments[commentIndex].like-1;\n        }else{\n          _like=this.comments[commentIndex].like+1;\n        }\n        var item={\n          _id:id,\n          like:_like\n        }\n        this.$http.post('server/comments/updateLike',item).then(\n          function (res) {\n              // 处理成功的结果\n              if (res.data.success) {\n                this.comments[commentIndex].like=_like;\n                this.comments[commentIndex].likeSelected=!selected;\n                if (route===undefined) {\n                  this.comments[commentIndex].unlikeSelected=false;\n                }\n                return;\n              }\n              else{\n                alert(res.data.error);\n              }\n            },function (res) {\n          // 处理失败的结果\n          alert(res.data);\n        })\n      }\n    }\n  }\n</script>\n<style lang='less'>\n  #dialogWin{\n    text-align: left;\n    .el-dialog__body{\n      height: 500px;\n      overflow-y: scroll;\n    }\n    .commentItems>div{\n      border-top: 1px solid #eee;\n      padding:10px;\n      .AuthorInfo{\n        margin: 10px 0px;\n        img{\n          cursor: pointer;\n        }\n        .name{\n          font-weight: 600;\n          line-height: 2;\n          vertical-align: text-bottom;\n          cursor: pointer;\n        }\n        .sign{\n          line-height: 2;\n          vertical-align: text-bottom;\n          font-size: 14px;\n        }\n      }\n      .hoverBtn{\n        display: none;\n      }\n      div:hover{\n        .hoverBtn{\n          display: inline-block;\n        }\n      }\n      .CommentTime {\n        vertical-align: super;\n        float: right;\n        color: #8590a6;\n      }\n      .el-button--info2{\n        color: #8590a6;\n        background-color: transparent;\n        border: none;\n        border-radius: 0;\n        padding: 8px 10px;\n      }\n      .buttons{\n        .selected{\n          color:#2d84cc;\n        }\n      }\n    }\n  }\n</style>"],"sourceRoot":"src/components"}]}