{"remainingRequest":"/Users/xutingting06/personal-space-for-pp/node_modules/babel-loader/lib/index.js!/Users/xutingting06/personal-space-for-pp/node_modules/eslint-loader/index.js??ref--13-0!/Users/xutingting06/personal-space-for-pp/server/index.js","dependencies":[{"path":"/Users/xutingting06/personal-space-for-pp/server/index.js","mtime":1589627586654},{"path":"/Users/xutingting06/personal-space-for-pp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/personal-space-for-pp/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xutingting06/personal-space-for-pp/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiKTsKCnZhciBwb3J0ID0gMzAwMDsKdmFyIFBJQ1NfUEFUSCA9ICcuL3N0YXRpYy8nOwp2YXIgUElDU19VUkwgPSAiaHR0cDovL2xvY2FsaG9zdDoiLmNvbmNhdChwb3J0LCAiL3N0YXRpYy8iKTsKCnZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpOwoKdmFyIG11bHRlciA9IHJlcXVpcmUoJ211bHRlcicpOwoKdmFyIHN0b3JhZ2UgPSBtdWx0ZXIuZGlza1N0b3JhZ2UoewogIGRlc3RpbmF0aW9uOiBmdW5jdGlvbiBkZXN0aW5hdGlvbihyZXEsIGZpbGUsIGNiKSB7CiAgICBjYihudWxsLCBQSUNTX1BBVEgpOwogIH0sCiAgZmlsZW5hbWU6IGZ1bmN0aW9uIGZpbGVuYW1lKHJlcSwgZmlsZSwgY2IpIHsKICAgIGNiKG51bGwsICdwaWMnICsgRGF0ZS5ub3coKSArICcucG5nJyk7CiAgfQp9KTsKdmFyIHVwbG9hZCA9IG11bHRlcih7CiAgc3RvcmFnZTogc3RvcmFnZQp9KTsKdmFyIGFwcCA9IGV4cHJlc3MoKTsKYXBwLmxpc3Rlbihwb3J0LCBmdW5jdGlvbiAocmVxKSB7CiAgY29uc29sZS5sb2cocmVxKTsKfSk7CmFwcC51c2UoZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7CiAgLy8g6Leo5Z+f6K6+572uCiAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcpOwogIHJlcy5oZWFkZXIoIkFjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzIiwgdHJ1ZSk7CiAgcmVzLmhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsIFBPU1QsIE9QVElPTlMnKTsKCiAgaWYgKHJlcS5tZXRob2QgPT0gJ09QVElPTlMnKSB7CiAgICByZXMuc2VuZFN0YXR1cygyMDApOwogIH0gZWxzZSB7CiAgICBuZXh0KCk7CiAgfQp9KTsgLy8g5paH5Lu25LiK5LygCgphcHAucG9zdCgnL2ZpbGVVcGxvYWQnLCB1cGxvYWQuc2luZ2xlKCdmaWxlJyksIGZ1bmN0aW9uIChyZXEsIHJlcykgewogIC8vcmVxLmZpbGXmlofku7YgcmVxLmJvZHnojrflj5bpmaTmlofku7blpJblhbbku5blj4LmlbAKICB2YXIgZmlsZSA9IHJlcS5maWxlOwogIHZhciBuYW1lID0gZmlsZS5wYXRoLnJlcGxhY2UoUElDU19QQVRILCAnJyk7CiAgcmVzLmpzb24oewogICAgc3VjY2VzczogdHJ1ZSwKICAgIG5hbWU6IG5hbWUsCiAgICB1cmw6IFBJQ1NfVVJMICsgbmFtZQogIH0pOwp9KTsKYXBwLmdldCgnL2ZpbGVVcGxvYWQxJywgZnVuY3Rpb24gKHJlcSwgcmVzKSB7CiAgY29uc29sZS5sb2coJ2JvZHknLCByZXEuYm9keSk7IC8v6I635Y+W5Yiw55qEYWdl5ZKMbmFtZQoKICBjb25zb2xlLmxvZygnZmlsZScsIHJlcS5maWxlKTsgLy/ojrflj5bliLDnmoTmlofku7YKCiAgcmVzLnNlbmQoewogICAgJ3N1Y2Nlc3MnOiB0cnVlCiAgfSk7Cn0pOw=="},{"version":3,"sources":["/Users/xutingting06/personal-space-for-pp/server/index.js"],"names":["port","PICS_PATH","PICS_URL","express","require","multer","storage","diskStorage","destination","req","file","cb","filename","Date","now","upload","app","listen","console","log","use","res","next","header","method","sendStatus","post","single","name","path","replace","json","success","url","get","body","send"],"mappings":";;;;AAAA,IAAMA,IAAI,GAAG,IAAb;AACA,IAAMC,SAAS,GAAG,WAAlB;AACA,IAAMC,QAAQ,8BAAuBF,IAAvB,aAAd;;AACA,IAAIG,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,MAAM,GAAGD,OAAO,CAAC,QAAD,CAApB;;AACA,IAAME,OAAO,GAAGD,MAAM,CAACE,WAAP,CAAmB;AAC/BC,EAAAA,WAAW,EAAE,qBAAUC,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AAClCA,IAAAA,EAAE,CAAC,IAAD,EAAOV,SAAP,CAAF;AACH,GAH8B;AAI/BW,EAAAA,QAAQ,EAAE,kBAAUH,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AAC/BA,IAAAA,EAAE,CAAC,IAAD,EAAO,QAAQE,IAAI,CAACC,GAAL,EAAR,GAAqB,MAA5B,CAAF;AACH;AAN8B,CAAnB,CAAhB;AAQA,IAAMC,MAAM,GAAGV,MAAM,CAAC;AAAEC,EAAAA,OAAO,EAAEA;AAAX,CAAD,CAArB;AAEA,IAAIU,GAAG,GAAGb,OAAO,EAAjB;AACAa,GAAG,CAACC,MAAJ,CAAWjB,IAAX,EAAiB,UAAUS,GAAV,EAAe;AAC5BS,EAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ;AACH,CAFD;AAGAO,GAAG,CAACI,GAAJ,CAAQ,UAACX,GAAD,EAAMY,GAAN,EAAWC,IAAX,EAAoB;AACxB;AACAD,EAAAA,GAAG,CAACE,MAAJ,CAAW,6BAAX,EAA0C,uBAA1C;AACAF,EAAAA,GAAG,CAACE,MAAJ,CAAW,kCAAX,EAA+C,IAA/C;AACAF,EAAAA,GAAG,CAACE,MAAJ,CAAW,8BAAX,EAA2C,oBAA3C;;AACA,MAAId,GAAG,CAACe,MAAJ,IAAc,SAAlB,EAA6B;AACzBH,IAAAA,GAAG,CAACI,UAAJ,CAAe,GAAf;AACH,GAFD,MAEO;AACHH,IAAAA,IAAI;AACP;AACJ,CAVD,E,CAWA;;AACAN,GAAG,CAACU,IAAJ,CAAS,aAAT,EAAwBX,MAAM,CAACY,MAAP,CAAc,MAAd,CAAxB,EAA+C,UAAClB,GAAD,EAAMY,GAAN,EAAc;AACzD;AACA,MAAIX,IAAI,GAAGD,GAAG,CAACC,IAAf;AACA,MAAIkB,IAAI,GAAGlB,IAAI,CAACmB,IAAL,CAAUC,OAAV,CAAkB7B,SAAlB,EAA6B,EAA7B,CAAX;AACAoB,EAAAA,GAAG,CAACU,IAAJ,CAAS;AACLC,IAAAA,OAAO,EAAE,IADJ;AAELJ,IAAAA,IAAI,EAAEA,IAFD;AAGLK,IAAAA,GAAG,EAAE/B,QAAQ,GAAG0B;AAHX,GAAT;AAKH,CATD;AAWAZ,GAAG,CAACkB,GAAJ,CAAQ,cAAR,EAAwB,UAACzB,GAAD,EAAMY,GAAN,EAAY;AAChCH,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBV,GAAG,CAAC0B,IAAxB,EADgC,CACF;;AAC9BjB,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBV,GAAG,CAACC,IAAxB,EAFgC,CAEF;;AAC9BW,EAAAA,GAAG,CAACe,IAAJ,CAAS;AACL,eAAW;AADN,GAAT;AAGH,CAND","sourcesContent":["const port = 3000;\nconst PICS_PATH = './static/';\nconst PICS_URL = `http://localhost:${port}/static/`;\nvar express = require('express');\nvar multer = require('multer')\nconst storage = multer.diskStorage({\n    destination: function (req, file, cb) {\n        cb(null, PICS_PATH);\n    },\n    filename: function (req, file, cb) {\n        cb(null, 'pic' + Date.now() + '.png');\n    }\n})\nconst upload = multer({ storage: storage });\n\nvar app = express();\napp.listen(port, function (req) {\n    console.log(req);\n})\napp.use((req, res, next) => {\n    // 跨域设置\n    res.header('Access-Control-Allow-Origin', 'http://localhost:8080');\n    res.header(\"Access-Control-Allow-Credentials\", true);\n    res.header('Access-Control-Allow-Methods', 'GET, POST, OPTIONS');\n    if (req.method == 'OPTIONS') {\n        res.sendStatus(200);\n    } else {\n        next();\n    }\n});\n// 文件上传\napp.post('/fileUpload', upload.single('file'), (req, res) => {\n    //req.file文件 req.body获取除文件外其他参数\n    let file = req.file;\n    let name = file.path.replace(PICS_PATH, '')\n    res.json({\n        success: true,\n        name: name,\n        url: PICS_URL + name\n    });\n})\n\napp.get('/fileUpload1', (req, res)=>{\n    console.log('body', req.body);//获取到的age和name\n    console.log('file', req.file);//获取到的文件\n    res.send({\n        'success': true\n    });\n})"]}]}