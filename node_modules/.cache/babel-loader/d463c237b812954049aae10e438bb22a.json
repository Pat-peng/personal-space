{"remainingRequest":"/Users/xutingting06/pat/personal-space/node_modules/babel-loader/lib/index.js!/Users/xutingting06/pat/personal-space/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xutingting06/pat/personal-space/src/components/AskQuestionModel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xutingting06/pat/personal-space/src/components/AskQuestionModel.vue","mtime":1590313833170},{"path":"/Users/xutingting06/pat/personal-space/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy94dXRpbmd0aW5nMDYvcGF0L3BlcnNvbmFsLXNwYWNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICIiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgcXVlc3Rpb25SdWxlID0gZnVuY3Rpb24gcXVlc3Rpb25SdWxlKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgewogICAgICB2YXIgcmVnID0gL1tcP++8n10rLzsKCiAgICAgIGlmICghcmVnLnRlc3QodmFsdWUpKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfkvaDov5jmsqHmnInnu5npl67popjmt7vliqDpl67lj7cnKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKCiAgICByZXR1cm4gewogICAgICBydWxlRm9ybTogewogICAgICAgIHF1ZXN0aW9uOiAiIgogICAgICB9LAogICAgICB0b3BpYzogIiIsCiAgICAgIHRvcGljczogW3sKICAgICAgICBuYW1lOiAi5YmN56uv5byA5Y+RIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogInZ1ZS5qcyIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICJub2RlLmpzIgogICAgICB9XSwKICAgICAgZmlsdGVyVG9waWNzOiBbewogICAgICAgIG5hbWU6ICLliY3nq6/lvIDlj5EiCiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAidnVlLmpzIgogICAgICB9LCB7CiAgICAgICAgbmFtZTogIm5vZGUuanMiCiAgICAgIH1dLAogICAgICByZW1hcms6ICIiLAogICAgICBhbm9ueW1vdXM6IGZhbHNlLAogICAgICBxdWVzdGlvblJ1bGVzOiB7CiAgICAgICAgcXVlc3Rpb246IHsKICAgICAgICAgIHZhbGlkYXRvcjogcXVlc3Rpb25SdWxlLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfQogICAgICB9CiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIEFza0RpYWxvZ1Zpc2libGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICB1c2VySW5mbzogZnVuY3Rpb24gdXNlckluZm8oKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mbzsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8v5o+Q6Zeu56qX5Y+j55qE5YWz6ZetCiAgICBBc2tEaWFsb2dDbG9zZTogZnVuY3Rpb24gQXNrRGlhbG9nQ2xvc2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlQXNrTW9kZWwnKTsKICAgIH0sCiAgICAvL+a3u+WKoOS4gOadoeivnemimOiusOW9lQogICAgYWRkVG9waWM6IGZ1bmN0aW9uIGFkZFRvcGljKHF1ZXN0aW9uKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2FkZFRvcGljJywgcXVlc3Rpb24pOwogICAgfSwKICAgIC8v5riF56m65o+Q6Zeu56qX5Y+jCiAgICBjbGVhckFza0RpYWxvZzogZnVuY3Rpb24gY2xlYXJBc2tEaWFsb2coKSB7CiAgICAgIHRoaXMucnVsZUZvcm0ucXVlc3Rpb24gPSAnJzsKICAgICAgdGhpcy50b3BpYyA9ICcnOwogICAgICB0aGlzLnJlbWFyayA9ICcnOwogICAgICB0aGlzLmFub255bW91cyA9IGZhbHNlOwogICAgfSwKICAgIC8v6YCJ5Lit6K+d6aKYCiAgICBzZWxlY3RUb3BpYzogZnVuY3Rpb24gc2VsZWN0VG9waWMoY29tbWFuZCkgewogICAgICB0aGlzLnRvcGljID0gY29tbWFuZDsKICAgIH0sCiAgICAvL+ivnemimOi/h+a7pAogICAgdG9waWNzRmlsdGVyOiBmdW5jdGlvbiB0b3BpY3NGaWx0ZXIoKSB7CiAgICAgIHZhciB2YWx1ZSA9IHRoaXMudG9waWMudHJpbSgpOwoKICAgICAgaWYgKHZhbHVlID09PSAnJykgewogICAgICAgIHRoaXMuZmlsdGVyVG9waWNzID0gdGhpcy50b3BpY3M7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHRvcGljcyA9IHRoaXMudG9waWNzOwogICAgICAgIHZhciBuZXdUb3BpY3MgPSBbXTsKCiAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRvcGljcyksCiAgICAgICAgICAgIF9zdGVwOwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIHRvcGljID0gX3N0ZXAudmFsdWU7CgogICAgICAgICAgICBpZiAodG9waWMubmFtZS5pbmRleE9mKHZhbHVlKSAhPSAtMSkgewogICAgICAgICAgICAgIG5ld1RvcGljcy5wdXNoKHRvcGljKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuZmlsdGVyVG9waWNzID0gbmV3VG9waWNzOwogICAgICB9CiAgICB9LAogICAgLy/liJvlu7rpl67popgKICAgIGNyZWF0ZVF1ZXN0aW9uOiBmdW5jdGlvbiBjcmVhdGVRdWVzdGlvbigpIHsKICAgICAgdmFyICR2bSA9IHRoaXM7CiAgICAgIHZhciBpdGVtID0gewogICAgICAgIHRpdGxlOiAkdm0ucnVsZUZvcm0ucXVlc3Rpb24sCiAgICAgICAgdG9waWNzOiAkdm0udG9waWMsCiAgICAgICAgY29udGVudDogJHZtLnJlbWFyaywKICAgICAgICBpc0Fub255bW91czogJHZtLmFub255bW91cywKICAgICAgICB1c2VySWQ6ICR2bS51c2VySW5mby5lbWFpbFBob25lCiAgICAgIH07CiAgICAgIHZhciByZXFVcmwgPSBsb2NhdGlvbi5vcmlnaW4ucmVwbGFjZShsb2NhdGlvbi5wb3J0LCAnMzAwMCcpOwogICAgICAkdm0uJGF4aW9zKHsKICAgICAgICB1cmw6IHJlcVVybCArICcvcXVlc3Rpb25zL2luc2VydCcsCiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgcGFyYW1zOiBpdGVtLAogICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyDlpITnkIbmiJDlip/nmoTnu5PmnpwKICAgICAgICBpZiAocmVzLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgYWxlcnQoIumXrumimOaPkOS6pOaIkOWKn++8gSIpOwogICAgICAgICAgJHZtLkFza0RpYWxvZ0Nsb3NlKCk7CiAgICAgICAgICAkdm0uYWRkVG9waWMocmVzLmRhdGEucXVlc3Rpb24pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydChyZXMuZGF0YS5lcnJvcik7CiAgICAgICAgfQogICAgICB9LCBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgLy8g5aSE55CG5aSx6LSl55qE57uT5p6cCiAgICAgICAgYWxlcnQocmVzLmRhdGEpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["AskQuestionModel.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <el-dialog id='askQuestion' :before-close=\"AskDialogClose\" :visible.sync=\"AskDialogVisible\">\n        <h2>写下你的问题</h2>\n        <div class=\"title1\">\n            <span>\n                描述精确的问题更易得到解答\n            </span>\n        </div>\n        <el-form ref='questionForm' :rules=\"questionRules\" :model=\"ruleForm\">\n            <el-form-item prop=\"question\">\n                <el-input type=\"textarea\" :rows=\"2\" placeholder=\"请输入问题\" v-model=\"ruleForm.question\">\n                </el-input>\n            </el-form-item>\n            <el-dropdown @command=\"selectTopic\" trigger='click'>\n                <el-input placeholder=\"添加话题\" @input=\"topicsFilter\" icon=\"search\" v-model=\"topic\">\n                </el-input>\n                <el-dropdown-menu class='askquestion' slot=\"dropdown\">\n                    <el-dropdown-item\n                        v-for=\"(topic,index) in filterTopics\"\n                        :key=\"index\"\n                        :command=\"topic.name\"\n                    >\n                        {{topic.name}}\n                    </el-dropdown-item>\n                </el-dropdown-menu>\n            </el-dropdown>\n            <div>\n                <div class=\"remark_toolbar\">问题描述（可选）：</div>\n                <div class=\"DraftEditor-root\">\n                    <el-input type=\"textarea\" placeholder='问题背景、条件等详细信息' :rows=\"4\" v-model=\"remark\">\n                    </el-input>\n                </div>\n            </div>\n            <div class=\"anonymous\">\n                <el-checkbox v-model=\"anonymous\">匿名提问</el-checkbox>\n            </div>\n            <el-button @click='createQuestion' type=\"primary\">提交问题</el-button>\n        </el-form>\n    </el-dialog>\n</template>\n<script>\n    export default {\n        name:\"\",\n        data(){\n            var questionRule=(rule, value, callback) => {\n                var reg=/[\\?？]+/;\n                if (!reg.test(value)) {\n                    callback(new Error('你还没有给问题添加问号'));\n                } else {\n                    callback();\n                }\n            };\n            return {\n                ruleForm: {\n                    question:\"\"\n                },\n                topic: \"\",\n                topics:[{\n                    name: \"前端开发\"\n                },{\n                    name: \"vue.js\"\n                },{\n                    name: \"node.js\"\n                }],\n                filterTopics:[{\n                    name:\"前端开发\"\n                },{\n                    name:\"vue.js\"\n                },{\n                    name:\"node.js\"\n                }],\n                remark:\"\",\n                anonymous:false,\n                questionRules: {\n                    question: {\n                        validator: questionRule,\n                        trigger: 'blur'\n                    }\n                }\n            }\n        },\n        props:{\n            AskDialogVisible: {\n                type: Boolean,\n                default: false\n            }\n        },\n        computed: {\n            userInfo() {\n                return this.$store.state.userInfo;\n            }\n        },\n        methods: {\n            //提问窗口的关闭\n            AskDialogClose() {\n                this.$emit('closeAskModel')\n            },\n            //添加一条话题记录\n            addTopic(question) {\n                this.$emit('addTopic',question)\n            },\n            //清空提问窗口\n            clearAskDialog() {\n                this.ruleForm.question='';\n                this.topic='';\n                this.remark='';\n                this.anonymous=false;\n            },\n            //选中话题\n            selectTopic(command) {\n                this.topic=command;\n            },\n            //话题过滤\n            topicsFilter() {\n                var value=this.topic.trim();\n                if (value==='') {\n                    this.filterTopics=this.topics;\n                }\n                else {\n                    var topics=this.topics;\n                    var newTopics=[];\n                    for(let topic of topics){\n                        if (topic.name.indexOf(value)!=-1) {\n                            newTopics.push(topic);\n                        }\n                    }\n                    this.filterTopics=newTopics;\n                }\n            },\n            //创建问题\n            createQuestion() {\n                let $vm = this;\n                var item = {\n                    title: $vm.ruleForm.question,\n                    topics: $vm.topic,\n                    content: $vm.remark,\n                    isAnonymous: $vm.anonymous,\n                    userId: $vm.userInfo.emailPhone\n                };\n                let reqUrl = location.origin.replace(location.port, '3000');\n                $vm.$axios({\n                    url: reqUrl + '/questions/insert',\n                    method: 'post',\n                    params: item,\n                    withCredentials: true\n                }).then(function (res) {\n                    // 处理成功的结果\n                    if (res.data.success) {\n                        alert(\"问题提交成功！\");\n                        $vm.AskDialogClose();\n                        $vm.addTopic(res.data.question);\n                        return;\n                    }\n                    else {\n                        alert(res.data.error);\n                    }\n                }, function (res) {\n                    // 处理失败的结果\n                    alert(res.data);\n                });\n            }\n        }\n    }\n</script>\n<style lang='less' scoped>\n    .el-dialog{\n        text-align: center;\n        .title1{\n            span{\n                color: #8590a6;\n            }\n        }\n        .el-dialog__body {\n            padding: 10px 20px 30px;\n        }\n        .el-dropdown {\n            margin-top: 0 !important;\n        }\n        .remark_toolbar{\n            text-align: left;\n        }\n        .anonymous{\n            text-align: left;\n            margin-bottom: 20px;\n        }\n        .el-dropdown{\n            width: 100%;\n        }\n        .el-form > div{\n            margin-top: 20px;\n            .el-form-item__error{\n                right: 0;\n                left: auto;\n            }\n        }\n    }\n    .el-dropdown-menu.askquestion{\n       width: calc(50% - 50px);\n   }\n</style>"],"sourceRoot":"src/components"}]}