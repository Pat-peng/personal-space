{"remainingRequest":"/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xutingting06/pat/personal-space/src/components/AskQuestionModel.vue?vue&type=style&index=0&id=7cb5141a&lang=less&scoped=true&","dependencies":[{"path":"/Users/xutingting06/pat/personal-space/src/components/AskQuestionModel.vue","mtime":1589715938380},{"path":"/Users/xutingting06/pat/personal-space/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiAuZWwtZGlhbG9newogICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAudGl0bGUxewogICAgICAgICBzcGFuewogICAgICAgICAgICAgY29sb3I6ICM4NTkwYTY7CiAgICAgICAgIH0KICAgICB9CiAgICAgLnJlbWFya190b29sYmFyewogICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgIH0KICAgICAuYW5vbnltb3VzewogICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgIH0KICAgICAuZWwtZHJvcGRvd257CiAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgIH0KICAgICAuZWwtZm9ybSA+IGRpdnsKICAgICAgICAgbWFyZ2luLXRvcDogMjBweDsKICAgICAgICAgLmVsLWZvcm0taXRlbV9fZXJyb3J7CiAgICAgICAgICAgICByaWdodDogMDsKICAgICAgICAgICAgIGxlZnQ6IGF1dG87CiAgICAgICAgIH0KICAgICB9CiB9CiAuZWwtZHJvcGRvd24tbWVudS5hc2txdWVzdGlvbnsKICAgIHdpZHRoOiBjYWxjKDUwJSAtIDUwcHgpOwp9Cg=="},{"version":3,"sources":["AskQuestionModel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AskQuestionModel.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <el-dialog id='askQuestion' :before-close=\"AskDialogClose\" :visible.sync=\"AskDialogVisible\">\n        <h2>写下你的问题</h2>\n        <div class=\"title1\">\n            <span>\n                描述精确的问题更易得到解答\n            </span>\n        </div>\n        <el-form ref='questionForm' :rules=\"questionRules\" :model=\"ruleForm\">\n            <el-form-item prop=\"question\">\n                <el-input type=\"textarea\" :rows=\"2\" placeholder=\"请输入问题\" v-model=\"ruleForm.question\">\n                </el-input>\n            </el-form-item>\n            <el-dropdown @command=\"selectTopic\" trigger='click'>\n                <el-input placeholder=\"添加话题\" @input=\"topicsFilter\" icon=\"search\" v-model=\"topic\">\n                </el-input>\n                <el-dropdown-menu class='askquestion' slot=\"dropdown\">\n                    <el-dropdown-item  v-for=\"topic in filterTopics\" :command=\"topic.name\">{{topic.name}}</el-dropdown-item>\n                </el-dropdown-menu>\n            </el-dropdown>\n            <div>\n                <div class=\"remark_toolbar\">问题描述（可选）：</div>\n                <div class=\"DraftEditor-root\">\n                    <el-input type=\"textarea\" placeholder='问题背景、条件等详细信息' :rows=\"4\" v-model=\"remark\">\n                    </el-input>\n                </div>\n            </div>\n            <div class=\"anonymous\">\n                <el-checkbox v-model=\"anonymous\">匿名提问</el-checkbox>\n            </div>\n            <el-button @click='createQuestion' type=\"primary\">提交问题</el-button>\n        </el-form>\n    </el-dialog>\n</template>\n<script>\n    export default{\n        name:\"\",\n        data(){\n            var questionRule=(rule, value, callback) => {\n                var reg=/[\\?？]+/;\n                if (!reg.test(value)) {\n                  callback(new Error('你还没有给问题添加问号'));\n              } else {\n                  callback();\n              }\n          };\n          return{\n            ruleForm:{\n                question:\"\"\n            },\n            topic:\"\",\n            topics:[{\n                name:\"前端开发\"\n            },{\n                name:\"vue.js\"\n            },{\n                name:\"node.js\"\n            }],\n            filterTopics:[{\n                name:\"前端开发\"\n            },{\n                name:\"vue.js\"\n            },{\n                name:\"node.js\"\n            }],\n            remark:\"\",\n            anonymous:false,\n            questionRules:{\n                question:{ validator: questionRule, trigger: 'blur' }\n            }\n        }\n    },\n    props:{\n        AskDialogVisible: {\n           type: Boolean\n        }\n    },\n    comoputed:{\n        // AskDialogVisible:function(){\n        //     debugger\n        //     this.clearAskDialog();\n        //     return this._props.AskDialogVisible;\n        // }\n    },\n    methods:{\n        //提问窗口的关闭\n        AskDialogClose:function(){\n            this.$emit('closeAskModel')\n        },\n        //添加一条话题记录\n        addTopic:function(question){\n            this.$emit('addTopic',question)\n        },\n        //清空提问窗口\n        clearAskDialog:function(){\n            this.ruleForm.question='';\n            this.topic='';\n            this.remark='';\n            this.anonymous=false;\n        },\n        //选中话题\n        selectTopic:function(command){\n            this.topic=command;\n        },\n        //话题过滤\n        topicsFilter:function(){\n            var value=this.topic.trim();\n            if (value==='') {\n                this.filterTopics=this.topics;\n            }\n            else{\n                var topics=this.topics;\n                var newTopics=[];\n                for(let topic of topics){\n                    if (topic.name.indexOf(value)!=-1) {\n                        newTopics.push(topic);\n                    }\n                }\n                this.filterTopics=newTopics;\n            }\n        },\n        //创建问题\n        createQuestion:function(){\n            var item={ title: this.ruleForm.question,\n             topics: this.topic,\n             content: this.remark,\n             isAnonymous:this.anonymous,\n             userId:this.$root.$children[0].userInfo.emailPhone\n         };\n         this.$http.post('/server/questions/insert',item).then(\n            function (res) {\n                      // 处理成功的结果\n                      if (res.data.success) {\n                        alert(\"问题提交成功！\");\n                        this.AskDialogClose();\n                        this.addTopic(res.data.question);\n                        return;\n                    }\n                    else{\n                        alert(res.data.error);\n                    }\n                },function (res) {\n                  // 处理失败的结果\n                  alert(res.data);\n              }\n              );\n     }\n }\n}\n</script>\n<style lang='less' scoped>\n    .el-dialog{\n        text-align: center;\n        .title1{\n            span{\n                color: #8590a6;\n            }\n        }\n        .remark_toolbar{\n            text-align: left;\n        }\n        .anonymous{\n            text-align: left;\n        }\n        .el-dropdown{\n            width: 100%;\n        }\n        .el-form > div{\n            margin-top: 20px;\n            .el-form-item__error{\n                right: 0;\n                left: auto;\n            }\n        }\n    }\n    .el-dropdown-menu.askquestion{\n       width: calc(50% - 50px);\n   }\n</style>"]}]}