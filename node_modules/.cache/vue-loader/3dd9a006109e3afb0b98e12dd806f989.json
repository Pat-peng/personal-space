{"remainingRequest":"/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xutingting06/pat/personal-space/src/page/login/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xutingting06/pat/personal-space/src/page/login/login.vue","mtime":1589719013529},{"path":"/Users/xutingting06/pat/personal-space/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdsb2dpbicsCiAgICBkYXRhKCkgewogICAgICAgIHZhciB2YWxpZGF0ZUVtYWlsUGhvbmUgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl5omL5py65Y+35oiW6YKu566xJykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdmFyIHJlZ1Bob25lPS8xWzMsNCw1LDhdXGR7OX0vOwogICAgICAgICAgICAgICAgdmFyIHJlZ0VtYWlsPS9eW0EtWmEtelxkXStbQS1aYS16XGQtX10qQFtBLVphLXpcZC1fXSsoLltBLVphLXpcZF17Miw0fSkkLzsKICAgICAgICAgICAgICAgIGlmICghKHJlZ1Bob25lLnRlc3QodmFsdWUpfHxyZWdFbWFpbC50ZXN0KHZhbHVlKSkpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+aJi+acuuWPt+aIlumCrueuseagvOW8j+S4jeato+ehricpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHNpZ251cFJ1bGVzOiB7CiAgICAgICAgICAgICAgICBuYW1lOiBbewogICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfor7floavlhpnlp5PlkI0nLAogICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIG1pbjogMywKICAgICAgICAgICAgICAgICAgICBtYXg6IDUsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+mVv+W6puWcqCAzIOWIsCA1IOS4quWtl+espicsCiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgIGVtYWlsUGhvbmU6IFt7CiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZUVtYWlsUGhvbmUsCiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBbewogICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfor7floavlhpnlr4bnoIEnLAogICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIG1pbjogNiwKICAgICAgICAgICAgICAgICAgICBtYXg6IDEyOCwKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWlIDYg5YiwIDEyOCDkvY3nmoTlr4bnoIEnLAogICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNpZ25pblJ1bGVzOiB7CiAgICAgICAgICAgICAgICBlbWFpbFBob25lOiBbewogICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfor7floavlhpnmiYvmnLrlj7fmiJbpgq7nrrEnLAogICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgICAgICBwYXNzd29yZDogW3sKICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn6K+35aGr5YaZ5a+G56CBJywKICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICB9LAogICAgICAgICAgICBzaWduaW46IHRydWUKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGxvZ2luSW4oZm9ybU5hbWUpIHsKICAgICAgICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgICAgICAgICAvLyDnmbvlvZUKICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybU5hbWU9PT0nc2lnbmluRm9ybScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NpZ25JbicsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjb250ZXh0JzogdGhpcwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy8g5rOo5YaMCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzaWduVXAnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY29udGV4dCc6dGhpcwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIHNpZ25pbmZvKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuc2lnbmluZm87CiAgICAgICAgfSwKICAgICAgICBmb3JtKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUubG9naW5Gb3JtOwogICAgICAgIH0sCiAgICAgICAgdXNlckluZm8oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mbzsKICAgICAgICB9CiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgICAnJHJvdXRlJzogewogICAgICAgICAgICBoYW5kbGVyKG5ld1ZhbCkgewogICAgICAgICAgICAgICAgdGhpcy5zaWduaW4gPSBuZXdWYWwucGF0aCA9PT0gJy9zaWduaW4nID8gdHJ1ZSA6IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NoYW5nZVNpZ25JbmZvJywgdGhpcy5zaWduaW4gPyAn55m75b2VJyA6ICfms6jlhoznn6XkuY4nKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/page/login","sourcesContent":["<template>\n    <div class='login'>\n        <div class='index-main-body'>\n            <div class=\"index-header\">\n                <h1 class=\"logo\"></h1>\n                <h2 class=\"subtitle\">与世界分享你的知识、经验和见解</h2>\n            </div>\n            <div class=\"index-tab-navs\">\n                <div class=\"navs-slider\">\n                    <router-link :to=\"'signup'\" :class=\"{active: !signin}\">注册</router-link>\n                    <router-link :to=\"'signin'\" :class=\"{active: signin}\">登录</router-link>\n                    <span class=\"navs-slider-bar\"></span>\n                </div>\n            </div>\n            <el-form ref=\"signupForm\" :rules=\"signupRules\" :model=\"form\"  key='signupForm' v-if='!signin'>\n                <el-form-item prop=\"name\">\n                    <el-input v-model=\"form.name\" placeholder='姓名'></el-input>\n                </el-form-item>\n                <el-form-item prop=\"emailPhone\">\n                    <el-input v-model=\"form.emailPhone\" placeholder='手机号或邮箱'></el-input>\n                </el-form-item>\n                <el-form-item prop=\"password\">\n                    <el-input type='password' v-model=\"form.password\" placeholder='密码'></el-input>\n                </el-form-item>\n                <el-form-item>\n                    <el-button type=\"primary\" @click=\"loginIn('signupForm')\" style='width:100%;'>{{signinfo}}</el-button>\n                </el-form-item>\n            </el-form>\n            <el-form ref=\"signinForm\" :rules=\"signinRules\" :model=\"userInfo\" key='signinForm' v-else>\n                <el-form-item prop=\"emailPhone\">\n                    <el-input v-model=\"userInfo.emailPhone\" placeholder='手机号或邮箱'></el-input>\n                </el-form-item>\n                <el-form-item prop=\"password\">\n                    <el-input type='password' v-model=\"userInfo.password\" placeholder='密码'></el-input>\n                </el-form-item>\n                <el-form-item>\n                    <el-button type=\"primary\" @click=\"loginIn('signinForm')\" style='width:100%;'>登录</el-button>\n                </el-form-item>\n            </el-form>\n        </div>\n    </div>\n</template>\n<script>\n    export default {\n        name: 'login',\n        data() {\n            var validateEmailPhone = (rule, value, callback) => {\n                if (value === '') {\n                    callback(new Error('请输入手机号或邮箱'));\n                }\n                else {\n                    var regPhone=/1[3,4,5,8]\\d{9}/;\n                    var regEmail=/^[A-Za-z\\d]+[A-Za-z\\d-_]*@[A-Za-z\\d-_]+(.[A-Za-z\\d]{2,4})$/;\n                    if (!(regPhone.test(value)||regEmail.test(value))) {\n                        callback(new Error('手机号或邮箱格式不正确'));\n                    }\n                    callback();\n                }\n            };\n            return {\n                signupRules: {\n                    name: [{\n                        required: true,\n                        message: '请填写姓名',\n                        trigger: 'blur'\n                    }, {\n                        min: 3,\n                        max: 5,\n                        message: '长度在 3 到 5 个字符',\n                        trigger: 'blur'\n                    }],\n                    emailPhone: [{\n                        validator: validateEmailPhone,\n                        trigger: 'blur'\n                    }],\n                    password: [{\n                        required: true,\n                        message: '请填写密码',\n                        trigger: 'blur'\n                    }, {\n                        min: 6,\n                        max: 128,\n                        message: '请输入 6 到 128 位的密码',\n                        trigger: 'blur'\n                    }],\n                },\n                signinRules: {\n                    emailPhone: [{\n                        required: true,\n                        message: '请填写手机号或邮箱',\n                        trigger: 'blur'\n                    }],\n                    password: [{\n                        required: true,\n                        message: '请填写密码',\n                        trigger: 'blur'\n                    }],\n                },\n                signin: true\n            }\n        },\n        methods: {\n            loginIn(formName) {\n                this.$refs[formName].validate((valid) => {\n                    if (valid) {\n                        // 登录\n                        if (formName==='signinForm') {\n                            this.$store.dispatch('signIn', {\n                                'context': this\n                            });\n                        }\n                        // 注册\n                        else {\n                            this.$store.dispatch('signUp', {\n                                'context':this\n                            });\n                        }\n                    }\n                    else {\n                        return false;\n                    }\n                });\n            }\n        },\n        computed: {\n            signinfo() {\n                return this.$store.state.signinfo;\n            },\n            form() {\n                return this.$store.state.loginForm;\n            },\n            userInfo() {\n                return this.$store.state.userInfo;\n            }\n        },\n        watch: {\n            '$route': {\n                handler(newVal) {\n                    this.signin = newVal.path === '/signin' ? true : false;\n                    this.$store.dispatch('changeSignInfo', this.signin ? '登录' : '注册知乎');\n                },\n                immediate: true\n            }\n        }\n    }\n</script>\n<style type=\"less\" scoped>\n    .login {\n        margin-top: 60px;\n    }\n    .index-main-body {\n        margin: auto;\n        padding: 30px 0 102px;\n        width: 300px;\n    }\n    @media (min-width: 741px) {\n        .index-main-body {\n            padding: 0;\n            min-height: 590px;\n            display: inline-block;\n            vertical-align: middle;\n            text-align: left;\n            white-space: normal;\n        }\n    }\n    .index-header {\n        text-align: center;\n    }\n    .index-header .logo {\n        margin: 0 auto;\n        width: 160px;\n        height: 74px;\n        background: url(../../assets/logo.png) no-repeat;\n        background-size: contain;\n    }\n    @media (max-width: 740px) {\n        .index-header .logo {\n            width: 96px;\n            height: 44.4px;\n        }\n    }\n    .index-header .subtitle {\n        margin: 30px 0 20px;\n        font-weight: 400;\n        font-size: 18px;\n        line-height: 1;\n    }\n    .index-tab-navs {\n        margin-bottom: 10px;\n        font-size: 18px;\n        text-align: center;\n    }\n    .index-tab-navs>.navs-slider{\n        display: inline-block;\n    }\n    .index-tab-navs a {\n        float: left;\n        color: #555;\n        width: 4em;\n        line-height: 35px;\n        opacity: .7;\n        -ms-filter: \"alpha(Opacity=70)\";\n        -webkit-transition: opacity .15s,color .15s;\n        transition: opacity .15s,color .15s;\n        text-decoration: none;\n    }\n    .index-tab-navs .active {\n        opacity: 1;\n        -ms-filter: \"alpha(Opacity=100)\";\n        color: #0f88eb;\n    }\n</style>"]}]}