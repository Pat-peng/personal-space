{"remainingRequest":"/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xutingting06/pat/personal-space/src/page/home/AskQuestionModel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xutingting06/pat/personal-space/src/page/home/AskQuestionModel.vue","mtime":1542010227000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgICBleHBvcnQgZGVmYXVsdHsKICAgICAgICBuYW1lOiIiLAogICAgICAgIGRhdGEoKXsKICAgICAgICAgICAgdmFyIHF1ZXN0aW9uUnVsZT0ocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgcmVnPS9bXD/vvJ9dKy87CiAgICAgICAgICAgICAgICBpZiAoIXJlZy50ZXN0KHZhbHVlKSkgewogICAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+S9oOi/mOayoeaciee7memXrumimOa3u+WKoOmXruWPtycpKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHJ1bGVGb3JtOnsKICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiIiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRvcGljOiIiLAogICAgICAgICAgICB0b3BpY3M6W3sKICAgICAgICAgICAgICAgIG5hbWU6IuWJjeerr+W8gOWPkSIKICAgICAgICAgICAgfSx7CiAgICAgICAgICAgICAgICBuYW1lOiJ2dWUuanMiCiAgICAgICAgICAgIH0sewogICAgICAgICAgICAgICAgbmFtZToibm9kZS5qcyIKICAgICAgICAgICAgfV0sCiAgICAgICAgICAgIGZpbHRlclRvcGljczpbewogICAgICAgICAgICAgICAgbmFtZToi5YmN56uv5byA5Y+RIgogICAgICAgICAgICB9LHsKICAgICAgICAgICAgICAgIG5hbWU6InZ1ZS5qcyIKICAgICAgICAgICAgfSx7CiAgICAgICAgICAgICAgICBuYW1lOiJub2RlLmpzIgogICAgICAgICAgICB9XSwKICAgICAgICAgICAgcmVtYXJrOiIiLAogICAgICAgICAgICBhbm9ueW1vdXM6ZmFsc2UsCiAgICAgICAgICAgIHF1ZXN0aW9uUnVsZXM6ewogICAgICAgICAgICAgICAgcXVlc3Rpb246eyB2YWxpZGF0b3I6IHF1ZXN0aW9uUnVsZSwgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBwcm9wczp7CiAgICAgICAgQXNrRGlhbG9nVmlzaWJsZTogewogICAgICAgICAgIHR5cGU6IEJvb2xlYW4KICAgICAgICB9CiAgICB9LAogICAgY29tb3B1dGVkOnsKICAgICAgICAvLyBBc2tEaWFsb2dWaXNpYmxlOmZ1bmN0aW9uKCl7CiAgICAgICAgLy8gICAgIGRlYnVnZ2VyCiAgICAgICAgLy8gICAgIHRoaXMuY2xlYXJBc2tEaWFsb2coKTsKICAgICAgICAvLyAgICAgcmV0dXJuIHRoaXMuX3Byb3BzLkFza0RpYWxvZ1Zpc2libGU7CiAgICAgICAgLy8gfQogICAgfSwKICAgIG1ldGhvZHM6ewogICAgICAgIC8v5o+Q6Zeu56qX5Y+j55qE5YWz6ZetCiAgICAgICAgQXNrRGlhbG9nQ2xvc2U6ZnVuY3Rpb24oKXsKICAgICAgICAgICAgdGhpcy4kZW1pdCgnY2xvc2VBc2tNb2RlbCcpCiAgICAgICAgfSwKICAgICAgICAvL+a3u+WKoOS4gOadoeivnemimOiusOW9lQogICAgICAgIGFkZFRvcGljOmZ1bmN0aW9uKHF1ZXN0aW9uKXsKICAgICAgICAgICAgdGhpcy4kZW1pdCgnYWRkVG9waWMnLHF1ZXN0aW9uKQogICAgICAgIH0sCiAgICAgICAgLy/muIXnqbrmj5Dpl67nqpflj6MKICAgICAgICBjbGVhckFza0RpYWxvZzpmdW5jdGlvbigpewogICAgICAgICAgICB0aGlzLnJ1bGVGb3JtLnF1ZXN0aW9uPScnOwogICAgICAgICAgICB0aGlzLnRvcGljPScnOwogICAgICAgICAgICB0aGlzLnJlbWFyaz0nJzsKICAgICAgICAgICAgdGhpcy5hbm9ueW1vdXM9ZmFsc2U7CiAgICAgICAgfSwKICAgICAgICAvL+mAieS4reivnemimAogICAgICAgIHNlbGVjdFRvcGljOmZ1bmN0aW9uKGNvbW1hbmQpewogICAgICAgICAgICB0aGlzLnRvcGljPWNvbW1hbmQ7CiAgICAgICAgfSwKICAgICAgICAvL+ivnemimOi/h+a7pAogICAgICAgIHRvcGljc0ZpbHRlcjpmdW5jdGlvbigpewogICAgICAgICAgICB2YXIgdmFsdWU9dGhpcy50b3BpYy50cmltKCk7CiAgICAgICAgICAgIGlmICh2YWx1ZT09PScnKSB7CiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclRvcGljcz10aGlzLnRvcGljczsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgdmFyIHRvcGljcz10aGlzLnRvcGljczsKICAgICAgICAgICAgICAgIHZhciBuZXdUb3BpY3M9W107CiAgICAgICAgICAgICAgICBmb3IobGV0IHRvcGljIG9mIHRvcGljcyl7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRvcGljLm5hbWUuaW5kZXhPZih2YWx1ZSkhPS0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RvcGljcy5wdXNoKHRvcGljKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclRvcGljcz1uZXdUb3BpY3M7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8v5Yib5bu66Zeu6aKYCiAgICAgICAgY3JlYXRlUXVlc3Rpb246ZnVuY3Rpb24oKXsKICAgICAgICAgICAgdmFyIGl0ZW09eyB0aXRsZTogdGhpcy5ydWxlRm9ybS5xdWVzdGlvbiwKICAgICAgICAgICAgIHRvcGljczogdGhpcy50b3BpYywKICAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMucmVtYXJrLAogICAgICAgICAgICAgaXNBbm9ueW1vdXM6dGhpcy5hbm9ueW1vdXMsCiAgICAgICAgICAgICB1c2VySWQ6dGhpcy4kcm9vdC4kY2hpbGRyZW5bMF0udXNlckluZm8uZW1haWxQaG9uZQogICAgICAgICB9OwogICAgICAgICB0aGlzLiRodHRwLnBvc3QoJy9zZXJ2ZXIvcXVlc3Rpb25zL2luc2VydCcsaXRlbSkudGhlbigKICAgICAgICAgICAgZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgLy8g5aSE55CG5oiQ5Yqf55qE57uT5p6cCiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgi6Zeu6aKY5o+Q5Lqk5oiQ5Yqf77yBIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuQXNrRGlhbG9nQ2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRUb3BpYyhyZXMuZGF0YS5xdWVzdGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQocmVzLmRhdGEuZXJyb3IpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAvLyDlpITnkIblpLHotKXnmoTnu5PmnpwKICAgICAgICAgICAgICAgICAgYWxlcnQocmVzLmRhdGEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApOwogICAgIH0KIH0KfQo="},{"version":3,"sources":["AskQuestionModel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AskQuestionModel.vue","sourceRoot":"src/page/home","sourcesContent":["<template>\n    <el-dialog id='askQuestion' :before-close=\"AskDialogClose\" :visible.sync=\"AskDialogVisible\">\n        <h2>写下你的问题</h2>\n        <div class=\"title1\">\n            <span>\n                描述精确的问题更易得到解答\n            </span>\n        </div>\n        <el-form ref='questionForm' :rules=\"questionRules\" :model=\"ruleForm\">\n            <el-form-item prop=\"question\">\n                <el-input type=\"textarea\" :rows=\"2\" placeholder=\"请输入问题\" v-model=\"ruleForm.question\">\n                </el-input>\n            </el-form-item>\n            <el-dropdown @command=\"selectTopic\" trigger='click'>\n                <el-input placeholder=\"添加话题\" @input=\"topicsFilter\" icon=\"search\" v-model=\"topic\">\n                </el-input>\n                <el-dropdown-menu class='askquestion' slot=\"dropdown\">\n                    <el-dropdown-item  v-for=\"topic in filterTopics\" :command=\"topic.name\">{{topic.name}}</el-dropdown-item>\n                </el-dropdown-menu>\n            </el-dropdown>\n            <div>\n                <div class=\"remark_toolbar\">问题描述（可选）：</div>\n                <div class=\"DraftEditor-root\">\n                    <el-input type=\"textarea\" placeholder='问题背景、条件等详细信息' :rows=\"4\" v-model=\"remark\">\n                    </el-input>\n                </div>\n            </div>\n            <div class=\"anonymous\">\n                <el-checkbox v-model=\"anonymous\">匿名提问</el-checkbox>\n            </div>\n            <el-button @click='createQuestion' type=\"primary\">提交问题</el-button>\n        </el-form>\n    </el-dialog>\n</template>\n<script>\n    export default{\n        name:\"\",\n        data(){\n            var questionRule=(rule, value, callback) => {\n                var reg=/[\\?？]+/;\n                if (!reg.test(value)) {\n                  callback(new Error('你还没有给问题添加问号'));\n              } else {\n                  callback();\n              }\n          };\n          return{\n            ruleForm:{\n                question:\"\"\n            },\n            topic:\"\",\n            topics:[{\n                name:\"前端开发\"\n            },{\n                name:\"vue.js\"\n            },{\n                name:\"node.js\"\n            }],\n            filterTopics:[{\n                name:\"前端开发\"\n            },{\n                name:\"vue.js\"\n            },{\n                name:\"node.js\"\n            }],\n            remark:\"\",\n            anonymous:false,\n            questionRules:{\n                question:{ validator: questionRule, trigger: 'blur' }\n            }\n        }\n    },\n    props:{\n        AskDialogVisible: {\n           type: Boolean\n        }\n    },\n    comoputed:{\n        // AskDialogVisible:function(){\n        //     debugger\n        //     this.clearAskDialog();\n        //     return this._props.AskDialogVisible;\n        // }\n    },\n    methods:{\n        //提问窗口的关闭\n        AskDialogClose:function(){\n            this.$emit('closeAskModel')\n        },\n        //添加一条话题记录\n        addTopic:function(question){\n            this.$emit('addTopic',question)\n        },\n        //清空提问窗口\n        clearAskDialog:function(){\n            this.ruleForm.question='';\n            this.topic='';\n            this.remark='';\n            this.anonymous=false;\n        },\n        //选中话题\n        selectTopic:function(command){\n            this.topic=command;\n        },\n        //话题过滤\n        topicsFilter:function(){\n            var value=this.topic.trim();\n            if (value==='') {\n                this.filterTopics=this.topics;\n            }\n            else{\n                var topics=this.topics;\n                var newTopics=[];\n                for(let topic of topics){\n                    if (topic.name.indexOf(value)!=-1) {\n                        newTopics.push(topic);\n                    }\n                }\n                this.filterTopics=newTopics;\n            }\n        },\n        //创建问题\n        createQuestion:function(){\n            var item={ title: this.ruleForm.question,\n             topics: this.topic,\n             content: this.remark,\n             isAnonymous:this.anonymous,\n             userId:this.$root.$children[0].userInfo.emailPhone\n         };\n         this.$http.post('/server/questions/insert',item).then(\n            function (res) {\n                      // 处理成功的结果\n                      if (res.data.success) {\n                        alert(\"问题提交成功！\");\n                        this.AskDialogClose();\n                        this.addTopic(res.data.question);\n                        return;\n                    }\n                    else{\n                        alert(res.data.error);\n                    }\n                },function (res) {\n                  // 处理失败的结果\n                  alert(res.data);\n              }\n              );\n     }\n }\n}\n</script>\n<style lang='scss' scoped>\n    .el-dialog{\n        text-align: center;\n        .title1{\n            span{\n                color: #8590a6;\n            }\n        }\n        .remark_toolbar{\n            text-align: left;\n        }\n        .anonymous{\n            text-align: left;\n        }\n        .el-dropdown{\n            width: 100%;            \n        }\n        .el-form > div{\n            margin-top: 20px;\n            .el-form-item__error{\n                right: 0;\n                left: auto;\n            }\n        }\n    }\n    .el-dropdown-menu.askquestion{\n       width: calc(50% - 50px);\n   }\n</style>"]}]}