{"remainingRequest":"/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xutingting06/pat/personal-space/src/components/AskQuestionModel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xutingting06/pat/personal-space/src/components/AskQuestionModel.vue","mtime":1590313833170},{"path":"/Users/xutingting06/pat/personal-space/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6IiIsCiAgICBkYXRhKCl7CiAgICAgICAgdmFyIHF1ZXN0aW9uUnVsZT0ocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgICAgICAgIHZhciByZWc9L1tcP++8n10rLzsKICAgICAgICAgICAgaWYgKCFyZWcudGVzdCh2YWx1ZSkpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5L2g6L+Y5rKh5pyJ57uZ6Zeu6aKY5re75Yqg6Zeu5Y+3JykpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcnVsZUZvcm06IHsKICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiIiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRvcGljOiAiIiwKICAgICAgICAgICAgdG9waWNzOlt7CiAgICAgICAgICAgICAgICBuYW1lOiAi5YmN56uv5byA5Y+RIgogICAgICAgICAgICB9LHsKICAgICAgICAgICAgICAgIG5hbWU6ICJ2dWUuanMiCiAgICAgICAgICAgIH0sewogICAgICAgICAgICAgICAgbmFtZTogIm5vZGUuanMiCiAgICAgICAgICAgIH1dLAogICAgICAgICAgICBmaWx0ZXJUb3BpY3M6W3sKICAgICAgICAgICAgICAgIG5hbWU6IuWJjeerr+W8gOWPkSIKICAgICAgICAgICAgfSx7CiAgICAgICAgICAgICAgICBuYW1lOiJ2dWUuanMiCiAgICAgICAgICAgIH0sewogICAgICAgICAgICAgICAgbmFtZToibm9kZS5qcyIKICAgICAgICAgICAgfV0sCiAgICAgICAgICAgIHJlbWFyazoiIiwKICAgICAgICAgICAgYW5vbnltb3VzOmZhbHNlLAogICAgICAgICAgICBxdWVzdGlvblJ1bGVzOiB7CiAgICAgICAgICAgICAgICBxdWVzdGlvbjogewogICAgICAgICAgICAgICAgICAgIHZhbGlkYXRvcjogcXVlc3Rpb25SdWxlLAogICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIHByb3BzOnsKICAgICAgICBBc2tEaWFsb2dWaXNpYmxlOiB7CiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgdXNlckluZm8oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mbzsKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIC8v5o+Q6Zeu56qX5Y+j55qE5YWz6ZetCiAgICAgICAgQXNrRGlhbG9nQ2xvc2UoKSB7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlQXNrTW9kZWwnKQogICAgICAgIH0sCiAgICAgICAgLy/mt7vliqDkuIDmnaHor53popjorrDlvZUKICAgICAgICBhZGRUb3BpYyhxdWVzdGlvbikgewogICAgICAgICAgICB0aGlzLiRlbWl0KCdhZGRUb3BpYycscXVlc3Rpb24pCiAgICAgICAgfSwKICAgICAgICAvL+a4heepuuaPkOmXrueql+WPowogICAgICAgIGNsZWFyQXNrRGlhbG9nKCkgewogICAgICAgICAgICB0aGlzLnJ1bGVGb3JtLnF1ZXN0aW9uPScnOwogICAgICAgICAgICB0aGlzLnRvcGljPScnOwogICAgICAgICAgICB0aGlzLnJlbWFyaz0nJzsKICAgICAgICAgICAgdGhpcy5hbm9ueW1vdXM9ZmFsc2U7CiAgICAgICAgfSwKICAgICAgICAvL+mAieS4reivnemimAogICAgICAgIHNlbGVjdFRvcGljKGNvbW1hbmQpIHsKICAgICAgICAgICAgdGhpcy50b3BpYz1jb21tYW5kOwogICAgICAgIH0sCiAgICAgICAgLy/or53popjov4fmu6QKICAgICAgICB0b3BpY3NGaWx0ZXIoKSB7CiAgICAgICAgICAgIHZhciB2YWx1ZT10aGlzLnRvcGljLnRyaW0oKTsKICAgICAgICAgICAgaWYgKHZhbHVlPT09JycpIHsKICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyVG9waWNzPXRoaXMudG9waWNzOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdmFyIHRvcGljcz10aGlzLnRvcGljczsKICAgICAgICAgICAgICAgIHZhciBuZXdUb3BpY3M9W107CiAgICAgICAgICAgICAgICBmb3IobGV0IHRvcGljIG9mIHRvcGljcyl7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRvcGljLm5hbWUuaW5kZXhPZih2YWx1ZSkhPS0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RvcGljcy5wdXNoKHRvcGljKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclRvcGljcz1uZXdUb3BpY3M7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8v5Yib5bu66Zeu6aKYCiAgICAgICAgY3JlYXRlUXVlc3Rpb24oKSB7CiAgICAgICAgICAgIGxldCAkdm0gPSB0aGlzOwogICAgICAgICAgICB2YXIgaXRlbSA9IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAkdm0ucnVsZUZvcm0ucXVlc3Rpb24sCiAgICAgICAgICAgICAgICB0b3BpY3M6ICR2bS50b3BpYywKICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICR2bS5yZW1hcmssCiAgICAgICAgICAgICAgICBpc0Fub255bW91czogJHZtLmFub255bW91cywKICAgICAgICAgICAgICAgIHVzZXJJZDogJHZtLnVzZXJJbmZvLmVtYWlsUGhvbmUKICAgICAgICAgICAgfTsKICAgICAgICAgICAgbGV0IHJlcVVybCA9IGxvY2F0aW9uLm9yaWdpbi5yZXBsYWNlKGxvY2F0aW9uLnBvcnQsICczMDAwJyk7CiAgICAgICAgICAgICR2bS4kYXhpb3MoewogICAgICAgICAgICAgICAgdXJsOiByZXFVcmwgKyAnL3F1ZXN0aW9ucy9pbnNlcnQnLAogICAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgICAgICAgICBwYXJhbXM6IGl0ZW0sCiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAvLyDlpITnkIbmiJDlip/nmoTnu5PmnpwKICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIumXrumimOaPkOS6pOaIkOWKn++8gSIpOwogICAgICAgICAgICAgICAgICAgICR2bS5Bc2tEaWFsb2dDbG9zZSgpOwogICAgICAgICAgICAgICAgICAgICR2bS5hZGRUb3BpYyhyZXMuZGF0YS5xdWVzdGlvbik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQocmVzLmRhdGEuZXJyb3IpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAvLyDlpITnkIblpLHotKXnmoTnu5PmnpwKICAgICAgICAgICAgICAgIGFsZXJ0KHJlcy5kYXRhKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["AskQuestionModel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AskQuestionModel.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <el-dialog id='askQuestion' :before-close=\"AskDialogClose\" :visible.sync=\"AskDialogVisible\">\n        <h2>写下你的问题</h2>\n        <div class=\"title1\">\n            <span>\n                描述精确的问题更易得到解答\n            </span>\n        </div>\n        <el-form ref='questionForm' :rules=\"questionRules\" :model=\"ruleForm\">\n            <el-form-item prop=\"question\">\n                <el-input type=\"textarea\" :rows=\"2\" placeholder=\"请输入问题\" v-model=\"ruleForm.question\">\n                </el-input>\n            </el-form-item>\n            <el-dropdown @command=\"selectTopic\" trigger='click'>\n                <el-input placeholder=\"添加话题\" @input=\"topicsFilter\" icon=\"search\" v-model=\"topic\">\n                </el-input>\n                <el-dropdown-menu class='askquestion' slot=\"dropdown\">\n                    <el-dropdown-item\n                        v-for=\"(topic,index) in filterTopics\"\n                        :key=\"index\"\n                        :command=\"topic.name\"\n                    >\n                        {{topic.name}}\n                    </el-dropdown-item>\n                </el-dropdown-menu>\n            </el-dropdown>\n            <div>\n                <div class=\"remark_toolbar\">问题描述（可选）：</div>\n                <div class=\"DraftEditor-root\">\n                    <el-input type=\"textarea\" placeholder='问题背景、条件等详细信息' :rows=\"4\" v-model=\"remark\">\n                    </el-input>\n                </div>\n            </div>\n            <div class=\"anonymous\">\n                <el-checkbox v-model=\"anonymous\">匿名提问</el-checkbox>\n            </div>\n            <el-button @click='createQuestion' type=\"primary\">提交问题</el-button>\n        </el-form>\n    </el-dialog>\n</template>\n<script>\n    export default {\n        name:\"\",\n        data(){\n            var questionRule=(rule, value, callback) => {\n                var reg=/[\\?？]+/;\n                if (!reg.test(value)) {\n                    callback(new Error('你还没有给问题添加问号'));\n                } else {\n                    callback();\n                }\n            };\n            return {\n                ruleForm: {\n                    question:\"\"\n                },\n                topic: \"\",\n                topics:[{\n                    name: \"前端开发\"\n                },{\n                    name: \"vue.js\"\n                },{\n                    name: \"node.js\"\n                }],\n                filterTopics:[{\n                    name:\"前端开发\"\n                },{\n                    name:\"vue.js\"\n                },{\n                    name:\"node.js\"\n                }],\n                remark:\"\",\n                anonymous:false,\n                questionRules: {\n                    question: {\n                        validator: questionRule,\n                        trigger: 'blur'\n                    }\n                }\n            }\n        },\n        props:{\n            AskDialogVisible: {\n                type: Boolean,\n                default: false\n            }\n        },\n        computed: {\n            userInfo() {\n                return this.$store.state.userInfo;\n            }\n        },\n        methods: {\n            //提问窗口的关闭\n            AskDialogClose() {\n                this.$emit('closeAskModel')\n            },\n            //添加一条话题记录\n            addTopic(question) {\n                this.$emit('addTopic',question)\n            },\n            //清空提问窗口\n            clearAskDialog() {\n                this.ruleForm.question='';\n                this.topic='';\n                this.remark='';\n                this.anonymous=false;\n            },\n            //选中话题\n            selectTopic(command) {\n                this.topic=command;\n            },\n            //话题过滤\n            topicsFilter() {\n                var value=this.topic.trim();\n                if (value==='') {\n                    this.filterTopics=this.topics;\n                }\n                else {\n                    var topics=this.topics;\n                    var newTopics=[];\n                    for(let topic of topics){\n                        if (topic.name.indexOf(value)!=-1) {\n                            newTopics.push(topic);\n                        }\n                    }\n                    this.filterTopics=newTopics;\n                }\n            },\n            //创建问题\n            createQuestion() {\n                let $vm = this;\n                var item = {\n                    title: $vm.ruleForm.question,\n                    topics: $vm.topic,\n                    content: $vm.remark,\n                    isAnonymous: $vm.anonymous,\n                    userId: $vm.userInfo.emailPhone\n                };\n                let reqUrl = location.origin.replace(location.port, '3000');\n                $vm.$axios({\n                    url: reqUrl + '/questions/insert',\n                    method: 'post',\n                    params: item,\n                    withCredentials: true\n                }).then(function (res) {\n                    // 处理成功的结果\n                    if (res.data.success) {\n                        alert(\"问题提交成功！\");\n                        $vm.AskDialogClose();\n                        $vm.addTopic(res.data.question);\n                        return;\n                    }\n                    else {\n                        alert(res.data.error);\n                    }\n                }, function (res) {\n                    // 处理失败的结果\n                    alert(res.data);\n                });\n            }\n        }\n    }\n</script>\n<style lang='less' scoped>\n    .el-dialog{\n        text-align: center;\n        .title1{\n            span{\n                color: #8590a6;\n            }\n        }\n        .el-dialog__body {\n            padding: 10px 20px 30px;\n        }\n        .el-dropdown {\n            margin-top: 0 !important;\n        }\n        .remark_toolbar{\n            text-align: left;\n        }\n        .anonymous{\n            text-align: left;\n            margin-bottom: 20px;\n        }\n        .el-dropdown{\n            width: 100%;\n        }\n        .el-form > div{\n            margin-top: 20px;\n            .el-form-item__error{\n                right: 0;\n                left: auto;\n            }\n        }\n    }\n    .el-dropdown-menu.askquestion{\n       width: calc(50% - 50px);\n   }\n</style>"]}]}