{"remainingRequest":"/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xutingting06/pat/personal-space/src/components/dialogWin.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/Users/xutingting06/pat/personal-space/src/components/dialogWin.vue","mtime":1589715947083},{"path":"/Users/xutingting06/pat/personal-space/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiNkaWFsb2dXaW57CiAgdGV4dC1hbGlnbjogbGVmdDsKICAuZWwtZGlhbG9nX19ib2R5ewogICAgaGVpZ2h0OiA1MDBweDsKICAgIG92ZXJmbG93LXk6IHNjcm9sbDsKICB9CiAgLmNvbW1lbnRJdGVtcz5kaXZ7CiAgICBib3JkZXItdG9wOiAxcHggc29saWQgI2VlZTsKICAgIHBhZGRpbmc6MTBweDsKICAgIC5BdXRob3JJbmZvewogICAgICBtYXJnaW46IDEwcHggMHB4OwogICAgICBpbWd7CiAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICB9CiAgICAgIC5uYW1lewogICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICAgICAgbGluZS1oZWlnaHQ6IDI7CiAgICAgICAgdmVydGljYWwtYWxpZ246IHRleHQtYm90dG9tOwogICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgfQogICAgICAuc2lnbnsKICAgICAgICBsaW5lLWhlaWdodDogMjsKICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogdGV4dC1ib3R0b207CiAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICB9CiAgICB9CiAgICAuaG92ZXJCdG57CiAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICB9CiAgICBkaXY6aG92ZXJ7CiAgICAgIC5ob3ZlckJ0bnsKICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgIH0KICAgIH0KICAgIC5Db21tZW50VGltZSB7CiAgICAgIHZlcnRpY2FsLWFsaWduOiBzdXBlcjsKICAgICAgZmxvYXQ6IHJpZ2h0OwogICAgICBjb2xvcjogIzg1OTBhNjsKICAgIH0KICAgIC5lbC1idXR0b24tLWluZm8yewogICAgICBjb2xvcjogIzg1OTBhNjsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgYm9yZGVyLXJhZGl1czogMDsKICAgICAgcGFkZGluZzogOHB4IDEwcHg7CiAgICB9CiAgICAuYnV0dG9uc3sKICAgICAgLnNlbGVjdGVkewogICAgICAgIGNvbG9yOiMyZDg0Y2M7CiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["dialogWin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dialogWin.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <el-dialog id='dialogWin' title=\"查看对话\" top=\"10%\" :before-close=\"dialogWinClose\" :visible.sync=\"dialogWinVisible\" @open='loadComments'>\n    <div class=\"commentItems\">\n      <div v-for=\"(comment,commentIndex) in comments\">\n        <div class=\"AuthorInfo\">\n          <img :src=\"comment.userImage\" style=\"width24px;height:24px;\">\n          <span class=\"name\">{{comment.userName}}\n            <span v-show='comment.RootID'>回复</span>\n            {{comment.PName}}\n          </span>\n          <span class=\"CommentTime\">{{comment.createAt}}</span>\n        </div>\n        <p>{{comment.content}}</p>\n        <div class=\"buttons\">\n          <el-button type=\"info2\" icon=\"star-on\" @click=\"likeComment(commentIndex,comment._id)\" :class=\"{selected:comment.likeSelected}\">{{comment.like?comment.like:\"赞\"}}</el-button>\n           <el-button type=\"info2\" class=\"hoverBtn\" icon=\"star-off\" @click=\"dislikeComment(commentIndex,comment._id)\" :class=\"[{selected:comment.unlikeSelected}]\">{{comment.unlikeSelected?\"取消踩\":\"踩\"}}</el-button>\n        </div>\n      </div>\n    </div>\n  </el-dialog>\n</template>\n<script>\n  export default{\n    name:\"\",\n    data(){\n      return{\n        comments:[]\n      }\n    },\n    props:{\n      dialogWinVisible: {\n        type: Boolean\n      },\n      RootID:{\n        type:String\n      }\n    },\n    // mounted(){//渲染时加载评论\n    //   this.loadComments()\n    // },\n    methods:{\n      //对话窗口的关闭\n      dialogWinClose:function(){\n        this.$emit('closeDialogWin')\n      },\n      //加载会话内容\n      loadComments:function(){\n        this.$http.get('/server/comments/replay?r='+this.RootID).then(\n          function (res) {\n              // 处理成功的结果\n              if (res.data.success) {\n                this.comments=res.data.comments;\n                return;\n              }\n              else{\n                alert(\"展开评论失败，\"+res.data.error);\n              }\n            },function (res) {\n            // 处理失败的结果\n            alert(res.data);\n          });\n      },\n      //踩\n      dislikeComment:function(commentIndex,id){\n        if(this.comments[commentIndex].unlikeSelected){\n          this.comments[commentIndex].unlikeSelected=false;\n        }else{\n          if (this.comments[commentIndex].likeSelected) {\n            this.likeComment(commentIndex,id,'route');\n          }\n          this.comments[commentIndex].unlikeSelected=true;\n        }\n      },\n      //赞\n      likeComment:function(commentIndex,id,route){\n        let selected=this.comments[commentIndex].likeSelected;\n        var _like;\n        if (selected) {\n          _like=this.comments[commentIndex].like-1;\n        }else{\n          _like=this.comments[commentIndex].like+1;\n        }\n        var item={\n          _id:id,\n          like:_like\n        }\n        this.$http.post('server/comments/updateLike',item).then(\n          function (res) {\n              // 处理成功的结果\n              if (res.data.success) {\n                this.comments[commentIndex].like=_like;\n                this.comments[commentIndex].likeSelected=!selected;\n                if (route===undefined) {\n                  this.comments[commentIndex].unlikeSelected=false;\n                }\n                return;\n              }\n              else{\n                alert(res.data.error);\n              }\n            },function (res) {\n          // 处理失败的结果\n          alert(res.data);\n        })\n      }\n    }\n  }\n</script>\n<style lang='less'>\n  #dialogWin{\n    text-align: left;\n    .el-dialog__body{\n      height: 500px;\n      overflow-y: scroll;\n    }\n    .commentItems>div{\n      border-top: 1px solid #eee;\n      padding:10px;\n      .AuthorInfo{\n        margin: 10px 0px;\n        img{\n          cursor: pointer;\n        }\n        .name{\n          font-weight: 600;\n          line-height: 2;\n          vertical-align: text-bottom;\n          cursor: pointer;\n        }\n        .sign{\n          line-height: 2;\n          vertical-align: text-bottom;\n          font-size: 14px;\n        }\n      }\n      .hoverBtn{\n        display: none;\n      }\n      div:hover{\n        .hoverBtn{\n          display: inline-block;\n        }\n      }\n      .CommentTime {\n        vertical-align: super;\n        float: right;\n        color: #8590a6;\n      }\n      .el-button--info2{\n        color: #8590a6;\n        background-color: transparent;\n        border: none;\n        border-radius: 0;\n        padding: 8px 10px;\n      }\n      .buttons{\n        .selected{\n          color:#2d84cc;\n        }\n      }\n    }\n  }\n</style>"]}]}