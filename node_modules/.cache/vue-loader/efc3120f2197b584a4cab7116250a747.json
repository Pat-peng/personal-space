{"remainingRequest":"/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xutingting06/pat/personal-space/src/components/dialogWin.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/Users/xutingting06/pat/personal-space/src/components/dialogWin.vue","mtime":1590318473666},{"path":"/Users/xutingting06/pat/personal-space/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xutingting06/pat/personal-space/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojZGlhbG9nV2luewogICAgdGV4dC1hbGlnbjogbGVmdDsKICAgIC5lbC1kaWFsb2dfX2JvZHl7CiAgICAgICAgaGVpZ2h0OiA1MDBweDsKICAgICAgICBvdmVyZmxvdy15OiBzY3JvbGw7CiAgICB9CiAgICAuY29tbWVudEl0ZW1zPmRpdnsKICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgI2VlZTsKICAgICAgICBwYWRkaW5nOjEwcHg7CiAgICAgICAgLkF1dGhvckluZm97CiAgICAgICAgICAgIG1hcmdpbjogMTBweCAwcHg7CiAgICAgICAgICAgIGltZ3sKICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgfQogICAgICAgICAgICAubmFtZXsKICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMjsKICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiB0ZXh0LWJvdHRvbTsKICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA1cHg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLnNpZ257CiAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMjsKICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiB0ZXh0LWJvdHRvbTsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAuaG92ZXJCdG57CiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICAgICAgfQogICAgICAgIGRpdjpob3ZlciB7CiAgICAgICAgICAgIC5ob3ZlckJ0biB7CiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLkNvbW1lbnRUaW1lIHsKICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IHN1cGVyOwogICAgICAgICAgICBmbG9hdDogcmlnaHQ7CiAgICAgICAgICAgIGNvbG9yOiAjODU5MGE2OwogICAgICAgIH0KICAgICAgICAuZWwtYnV0dG9uLS1pbmZvMnsKICAgICAgICAgICAgY29sb3I6ICM4NTkwYTY7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OwogICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7CiAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxMHB4OwogICAgICAgIH0KICAgICAgICAuYnV0dG9uc3sKICAgICAgICAgICAgLnNlbGVjdGVkewogICAgICAgICAgICAgICAgY29sb3I6IzJkODRjYzsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["dialogWin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dialogWin.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <el-dialog id='dialogWin' title=\"查看对话\" top=\"10%\" :before-close=\"dialogWinClose\" :visible.sync=\"dialogWinVisible\">\n        <div class=\"commentItems\">\n            <div v-for=\"(comment,commentIndex) in comments\">\n                <div class=\"AuthorInfo\">\n                    <img :src=\"comment.userImage\" style=\"width24px;height:24px;\">\n                    <span class=\"name\">{{comment.userName}}\n                    <span v-show='comment.rootID'>回复</span>\n                        {{comment.PName}}\n                    </span>\n                    <span class=\"CommentTime\">\n                        {{comment.createAt}}\n                    </span>\n                </div>\n                <p>{{comment.content}}</p>\n                <div class=\"buttons\">\n                    <el-button type=\"info2\" icon=\"star-on\" @click=\"likeComment(commentIndex,comment._id)\" :class=\"{selected:comment.likeSelected}\">\n                        {{comment.like? \"赞\"+comment.like : \"赞\"}}\n                    </el-button>\n                    <el-button type=\"info2\" class=\"hoverBtn\" icon=\"star-off\" @click=\"dislikeComment(commentIndex,comment._id)\" :class=\"[{selected:comment.unlikeSelected}]\">\n                        {{comment.unlikeSelected ? \"取消踩\" : \"踩\"}}\n                    </el-button>\n                </div>\n            </div>\n        </div>\n    </el-dialog>\n</template>\n<script>\n    let reqUrl = location.origin.replace(location.port, '3000');\n    export default {\n        name: \"\",\n        data() {\n            return{\n                comments:[]\n            }\n        },\n        props:{\n            dialogWinVisible: {\n                type: Boolean\n            },\n            rootID: {\n                type:String\n            }\n        },\n        mounted() {\n            // 渲染时加载评论\n            this.loadComments()\n        },\n        methods: {\n            //对话窗口的关闭\n            dialogWinClose:function(){\n                this.$emit('closeDialogWin')\n            },\n            //加载会话内容\n            loadComments:function(){\n                let $vm = this;\n                $vm.$axios({\n                    url: reqUrl + '/comments/replay',\n                    method: 'get',\n                    params: {\n                        r: $vm.rootID\n                    },\n                    withCredentials: true\n                }).then(function (res) {\n                    // 处理成功的结果\n                    if (res.data.success) {\n                        $vm.comments=res.data.comments;\n                        return;\n                    }\n                    else{\n                        alert(\"展开评论失败，\"+res.data.error);\n                    }\n                },function (res) {\n                    // 处理失败的结果\n                    alert(res.data);\n                });\n            },\n            //踩\n            dislikeComment:function(commentIndex,id){\n                if(this.comments[commentIndex].unlikeSelected){\n                    this.comments[commentIndex].unlikeSelected=false;\n                }\n                else {\n                    if (this.comments[commentIndex].likeSelected) {\n                        this.likeComment(commentIndex,id,'route');\n                    }\n                    this.comments[commentIndex].unlikeSelected=true;\n                }\n            },\n            //赞\n            likeComment:function(commentIndex,id,route){\n                let $vm = this;\n                let selected=$vm.comments[commentIndex].likeSelected;\n                var _like;\n                if (selected) {\n                    _like=$vm.comments[commentIndex].like-1;\n                }\n                else{\n                    _like=$vm.comments[commentIndex].like+1;\n                }\n                var item={\n                    _id:id,\n                    like:_like\n                }\n                $vm.$axios({\n                    url: reqUrl + '/comments/updateLike',\n                    method: 'post',\n                    params: item,\n                    withCredentials: true\n                }).then(function (res) {\n                    // 处理成功的结果\n                    if (res.data.success) {\n                        $vm.comments[commentIndex].like=_like;\n                        $vm.comments[commentIndex].likeSelected=!selected;\n                        if (route===undefined) {\n                            $vm.comments[commentIndex].unlikeSelected=false;\n                        }\n                        return;\n                    }\n                    else{\n                        alert(res.data.error);\n                    }\n                }, function (res) {\n                    // 处理失败的结果\n                    alert(res.data);\n                })\n            }\n        }\n    }\n</script>\n<style lang='less'>\n#dialogWin{\n    text-align: left;\n    .el-dialog__body{\n        height: 500px;\n        overflow-y: scroll;\n    }\n    .commentItems>div{\n        border-top: 1px solid #eee;\n        padding:10px;\n        .AuthorInfo{\n            margin: 10px 0px;\n            img{\n                cursor: pointer;\n            }\n            .name{\n                font-weight: 600;\n                line-height: 2;\n                vertical-align: text-bottom;\n                cursor: pointer;\n                margin-left: 5px;\n            }\n            .sign{\n                line-height: 2;\n                vertical-align: text-bottom;\n                font-size: 14px;\n            }\n        }\n        .hoverBtn{\n            display: none;\n        }\n        div:hover {\n            .hoverBtn {\n                display: inline-block;\n            }\n        }\n        .CommentTime {\n            vertical-align: super;\n            float: right;\n            color: #8590a6;\n        }\n        .el-button--info2{\n            color: #8590a6;\n            background-color: transparent;\n            border: none;\n            border-radius: 0;\n            padding: 8px 10px;\n        }\n        .buttons{\n            .selected{\n                color:#2d84cc;\n            }\n        }\n    }\n}\n</style>"]}]}